FROM openjdk:11 AS runstage
ARG MYSQL_USER
ARG MYSQL_PASSWORD
ARG MAILGUN_DOMAIN_NAME
ARG MAILGUN_API_KEY
ARG TWILIO_ACCOUNT_SID
ARG TWILIO_AUTH_TOKEN
ARG TWILIO_SERVICE_SID
ARG GOOGLE_CLIENT_ID
ARG GOOGLE_CLIENT_SECRET
ENV MYSQL_USER=$MYSQL_USER
ENV MYSQL_PASSWORD=$MYSQL_PASSWORD
ENV MAILGUN_DOMAIN_NAME=$MAILGUN_DOMAIN_NAME
ENV MAILGUN_API_KEY=$MAILGUN_API_KEY
ENV TWILIO_ACCOUNT_SID=$TWILIO_ACCOUNT_SID
ENV TWILIO_AUTH_TOKEN=$TWILIO_AUTH_TOKEN
ENV TWILIO_SERVICE_SID=$TWILIO_SERVICE_SID
ENV GOOGLE_CLIENT_ID=$GOOGLE_CLIENT_ID
ENV GOOGLE_CLIENT_SECRET=$GOOGLE_CLIENT_SECRET
COPY target/*.jar app.jar
ENTRYPOINT ["java", "-jar", "/app.jar"]